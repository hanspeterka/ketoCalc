{% extends "base.html.j2" %}
{% block title %}
    {{ texts.ingredient }}
{% endblock %}

{% block style %}{% endblock %}

{% block script %}{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-8 col-sm-12"  style="margin-bottom:30px">
                <form action="{{ url_for('IngredientsView:post_edit', id=ingredient.id) }}" class="form-group" method="post" accept-charset="utf-8">
                    {{ form.csrf_token }}
                    {% from "_form_element.html.j2" import render_field %}
                    <table class="table">

                        <tr>
                            <th>{{ texts.title }}</th>
                            <th>{{ texts.energy_100 }}</th>
                            <th>{{ texts.protein_100 }}</th>
                            <th>{{ texts.fat_100 }}</th>
                            <th>{{ texts.sugar_100 }}</th>
                        </tr>
                        <tr>
                            <td>
                                {{ render_field(form.name, "form-control", label=False, value=ingredient.name) }}
                                {# <input type="text" class="form-control" name="name" value="{{ ingredient.name }}" /> #}
                            </td>
                            <td>
                                {{ render_field(form.calorie, "form-control", label=False, value=ingredient.calorie) }}
                                {# <input type="text" class="form-control" name="calorie" value="{{ ingredient.calorie }}" /> #}
                            </td>
                            <td>
                                {% if ingredient.is_used == False %}
                                    {{ render_field(form.protein, "form-control", label=False, value=ingredient.protein) }}
                                    {# <input type="text" class="form-control" pattern="[0-9]+([\.][0-9]+)?" name="protein" value="{{ ingredient.protein }}"/> #}
                                {% else %}
                                    {{ ingredient.protein }}
                                {% endif %}
                            </td>
                            <td>
                                {% if ingredient.is_used == False %}
                                    {{ render_field(form.fat, "form-control", label=False, value=ingredient.fat) }}
                                    {# <input type="text" class="form-control" pattern="[0-9]+([\.][0-9]+)?" name="fat" value="{{ ingredient.fat }}"/> #}
                                {% else %}
                                    {{ ingredient.fat }}
                                {% endif %}
                            </td>
                            <td>
                                {% if ingredient.is_used == False %}
                                    {{ render_field(form.sugar, "form-control", label=False, value=ingredient.sugar) }}
                                    {# <input type="text" class="form-control" pattern="[0-9]+([\.][0-9]+)?" name="sugar" value="{{ ingredient.sugar }}"/> #}
                                {% else %}
                                    {{ ingredient.sugar }}
                                {% endif %}
                            </td>
                        </tr>
                    </table>

                        {{ render_field(form.submit, "btn btn-warning", False, value=texts.edit_confirm+icons.edit) }}
                        {# <button type="submit" class="btn btn-warning">{{ texts.edit_confirm }} {{ icons.edit }}</button> #}
                        <a class="btn btn-secondary" href="{{ url_for('IngredientsView:show', id=ingredient.id) }}">{{ texts.edit_cancel }} {{ icons.edit }}</a>
                    

                </form>

                <form
                    action="{{ url_for('IngredientsView:delete', id=ingredient.id) }}"
                    onsubmit="return confirm('{{ texts.ingredient_delete_confirm }}');"
                    method="post"
                    accept-charset="utf-8"
                >
                    {% if ingredient.is_used == False %}
                        <button type="submit" class="btn btn-danger">{{ texts.ingredient_delete }} {{ icons.delete }}</button>
                    {% else %}
                        <button type="submit" class="btn btn-danger" disabled>{{ texts.delete_error }} {{ icons.delete }}</button>
                    {% endif %}
                 </form>
            </div>

             {% include ('recipes/_recipe_list.html.j2') %}
        </div>
    </div>
{% endblock %}

