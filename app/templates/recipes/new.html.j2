{% extends "base.html.j2" %}
{% block title %}
    {{ texts.recipe_new }}
{% endblock %}

{% block script %}
    {% include 'javascript/stimulus.js.html' %}
    {% include 'javascript/new_recipe.js.html' %}
    {% include 'javascript/new_recipe_help.js.html' %}
{% endblock %}

{% block content %}
    <div class="container-fluid" data-controller="new-recipe new-recipe-help">
        <div class="row">
            <div class="hidden">
                <select data-target="new-recipe.baseSelect">
                    {% for ingredient in ingredients: %}
                        <option name='{{ingredient.name}}' value="{{ingredient.id}}">{{ingredient.name}}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-lg-6 col-md-12" >
                <div class="col-12">
                    <form class="form-inline" data-action="submit->new-recipe#add_ingredient">
                        <select class="form-control" id="ingredient_select" data-target="new-recipe.select">
                        {% for ingredient in ingredients: %}
                            <option name='{{ingredient.name}}' value="{{ingredient.id}}">{{ingredient.name}}</option>
                        {% endfor %}
                        </select>

                        <input type="submit" class="btn btn-primary" value="PÅ™idat surovinu" />
                        <i class="help fa fa-info-circle" data-action="mouseover->new-recipe-help#show_help mouseout->new-recipe-help#hide_help"></i>
                    </form>
                </div>

                <div class="col-11">
                    <table class="table" data-target="new-recipe.ingredientTable">
                        <tr>
                            <th>{{ texts.title }}</th>
                            <th>{{ texts.energy_100 }}</th>
                            <th>{{ texts.protein_100 }}</th>
                            <th>{{ texts.fat_100 }}</th>
                            <th>{{ texts.sugar_100}}</th>
                            <th></th>
                        </tr>
                    </table>
                </div>

                <div class="col-12">
                    <form class="form-inline" data-action="submit->new-recipe#calculate_recipe">
                        <label >{{ texts.diet_name}}</label>
                        <select class="form-control" data-target="new-recipe.selectDiet">
                        {% for diet in diets: %}
                            <option value="{{diet.id}}">{{ diet.name }}</option>
                        {% endfor %}
                        </select>
                        <input type="submit" class="btn btn-primary"  value="{{ texts.calc_amount }}" />
                    </form>

                    {% include 'ingredients/_data_source_aknowledgement.html.j2' %}
                </div>
            </div>

            
            <div class="col-lg-6 col-md-12">
                <div data-target="new-recipe-help.help"></div>

                <div class="recipe__loader" data-target="new-recipe.loader"></div>

                <div class="recipe__wrong" data-target="new-recipe.wrongRecipe">
                    <span>{{ texts.recipe_impossible }}</span>
                </div>

                <div class="recipe__right" data-target="new-recipe.recipe"></div>

            </div>
        </div>
    </div>
{% endblock %}
