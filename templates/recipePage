<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Recept</title>
    {% include('bootstrap') %}
    {% include('styleBody') %}

        <script type="text/javascript">

            $(document).on("click", ".editShowButton", function() {
                $('.edit__form').show();
                $('.data__table').hide();
                $('.editShowButton').hide();
                $('.editHideButton').show();
            });

            $(document).on("click", ".editHideButton", function() {
                $('.edit__form').hide();
                $('.data__table').show();
                $('.editShowButton').show();
                $('.editHideButton').hide();
            });

            $(document).on("click", ".printButton", function() {
                var win = window.open(window.location.href + '/print');
                win.focus();
            });


    
        </script>

        <style type="text/css" media="screen">
            .edit__form{
                display: none;
            }

            .editHideButton{
                display: none;
            }            
        </style>

</head>
<body>
    {% include('navbar') %}
    <div class="container">
        <div class="col-12">
            <form action="/recipe={{recipe.id}}/edit" class="form-inline edit__form" method="post" accept-charset="utf-8">
                <input type="text" name="name" class="form-control col-4" value="{{ recipe.name }}">
                <input type="submit" value="Změnit název" class="btn btn-warning">
            </form>

            <span class="data__table"><h2>{{ recipe.name }}</h2></span>

            {% if recipe.size == "small" %}
                <h5>Malé jídlo ({{ diet.small_size }}%)</h5>
            {% elif recipe.size == "big" %}
                <h5>Velké jídlo ({{ diet.big_size }}%)</h5> 
            {% endif %}
            <table id="ingredients" class="table">
                <tr>
                    <th>Název</th>
                    <th>Bílkovina</th>
                    <th>Tuk</th>
                    <th>Sacharidy</th>
                    <th>Množství</th>
                    <th></th>
                </tr>

                {% for ingredient in ingredients: %}
                    <tr>
                        <td>
                            <a href="/ingredient={{ingredient.id}}">{{ ingredient.name }}</a>
                        </td>
                        <td>{{ ingredient.protein }} g</td>
                        <td>{{ ingredient.fat }} g</td>
                        <td>{{ ingredient.sugar }} g</td>
                        <td>{{ ingredient.amount}} g</td>
                        <td></td>
                    </tr>
                {% endfor %}

                <tr>
                    <td>Celkem</td>
                    <td>{{ totals.protein }} g</td>
                    <td>{{ totals.fat }} g</td>
                    <td>{{ totals.sugar }} g</td>
                    <td>{{ totals.amount }} g</td>
                    <td>Poměr: {{ totals.eq }} : 1</td>
                </tr>
            </table>
            <div class="row">
                <form action="/recipe={{recipe.id}}/remove" method="post" class="form col-5"  accept-charset="utf-8">
                    <input type="submit" class="btn btn-danger" value="Smazat recept" />
                    <input type="button" class="editShowButton btn btn-warning" value="Upravit recept" />
                    <input type="button" class="editHideButton btn btn-warning" value="Zrušit úpravy" />
                    <input type="button" class="printButton btn" value="Vytisknout" />
                </form>

                <span class="col-2"></span>

                <form action="/recipe={{recipe.id}}/export" class="form-inline col-5" method="post" accept-charset="utf-8">
                    <input type="submit" class="btn" value="Exportovat recept do diety" />
                    <select name="diet" class="form-control">
                            {% for diet in diets %}
                                <option value="{{ diet.id }}">{{ diet.name }}</option>
                            {% endfor %}
                    </select>
                </form>
            </div>
        </div>
    </div>


</body>
</html>